# Бизнес-процессы

Last updated: 2026-02-13

## Цель приложения

Приложение позволяет администратору:

- собирать видео из внешних сайтов-источников,
- вручную контролировать качество и соответствие через governance тегов/моделей,
- публиковать только готовые видео,
- отдавать опубликованные видео пользователям через публичный API.

## Роли

- `Администратор`: парсит, валидирует, сопоставляет, публикует, скрывает.
- `Публичный пользователь`: видит только опубликованные видео.

## Основной флоу

1. Администратор запускает парсинг категории или отдельного видео.
2. Система сохраняет unified-данные видео и источники (`player`, `thumbnail`, `trailer`, `timeline` и т.д.).
3. Система сохраняет сырые теги и модели для governance.
4. Администратор маппит сырые теги/модели в канонические или игнорирует лишнее.
5. После закрытия обязательных маппингов администратор публикует видео.
6. Публичный API начинает отдавать видео пользователям.

## Ключевые бизнес-правила

- Парсинг видео считается успешным только при наличии `player_source_url`.
- Публикация запрещена, если видео не прошло governance по обязательным сущностям.
- Второстепенные ассеты (`trailer`, `timeline`, `poster`) могут отсутствовать.
- Публичный API никогда не отдает внутренние governance-детали (raw/mapping).
- Админский API может отдавать детали governance для ручной модерации.

## Публикация и жизненный цикл

- Сущность `parsed video` — рабочий черновик после парсинга.
- Сущность `published video` — отдельная проекция для прод-выдачи.
- Статусы публикации управляют видимостью в публичном API.
- `PUBLISHED` — доступно пользователю.
- `HIDDEN` и другие не-публичные статусы — не видны пользователю.
